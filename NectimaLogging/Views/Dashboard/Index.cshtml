@model NectimaLogging.Services.Chart.ExceptionChartStart
@{
    ViewData["Title"] = "Index";
}

<div id="dashboard-grid-container">


    <div id="line-container">

        <canvas id="line-chart"></canvas>

        <form id="prev-btn" method="post" asp-action="Index" role="form">

            <input id="week" type="submit" value="prev" />
            <input name="isPrev" type="hidden" value="true" checked />
            <input id="prev-week" name="prevWeek" type="hidden" value="@Model.MyCounter" />



        </form>
        <form id="next-btn" method="post" asp-action="Index" role="form">

            <input type="submit" value="next" />
            <input name="isNext" type="hidden" value="true" checked />
            <input id="prev-week" name="prevWeek" type="hidden" value="@Model.MyCounter" />
        </form>
    </div>


    <div id="doughnut-container">
        <canvas id="doughnut-chart"></canvas>
    </div>

    <div id="bar-container">
        <canvas id="bar-chart"></canvas>
    </div>

    <div id="bubble-container">
        <canvas id="bubble-chart"></canvas>
    </div>



    </div>
    <script >

        let myLabelLogger = @Html.Raw(Json.Serialize(@Model.LoggerName()));
        let myDataLogger = @Html.Raw(Json.Serialize(@Model.LoggerCount()));

        new Chart(document.getElementById("bubble-chart"), {
            type: 'radar',
            data: {
                labels: myLabelLogger,
                datasets: [
                    {
                        label: myLabelLogger,
                        fill: true,
                        backgroundColor: "rgba(179,181,198,0.2)",
                        borderColor: "rgba(179,181,198,1)",
                        pointBorderColor: "#fff",
                        pointBackgroundColor: "rgba(179,181,198,1)",
                        data: [8.77, 55.61, 21.69, 6.62, 6.82]
                    }, {
                        label: "2050",
                        fill: true,
                        backgroundColor: "rgba(255,99,132,0.2)",
                        borderColor: "rgba(255,99,132,1)",
                        pointBorderColor: "#fff",
                        pointBackgroundColor: "rgba(255,99,132,1)",
                        pointBorderColor: "#fff",
                        data: [25.48, 54.16, 7.61, 8.06, 4.45]
                    }
                ]
            },
            options: {
                title: {
                    display: true,
                    text: 'heading'
                }
            }
        });

        let myLabel = @Html.Raw(Json.Serialize(@Model.ThreadName()));
        let myData = @Html.Raw(Json.Serialize(@Model.ThreadCount()));

        function getRandomColor() {
            let letters = '0123456789ABCDEF'.split('');
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        };

        function randomrgba() {
            var o = Math.round, r = Math.random, s = 255;
            return 'rgba(' + o(r() * s) + ',' + o(r() * s) + ',' + o(r() * s) + ',' + r().toFixed(1) + ')';
        };

        function test() {
            var k = [];
            for (var i = 0; i < myData.length; i++) {
                k.push(getRandomColor());
            }
            return k;

        }


    new Chart(document.getElementById("bar-chart"), {
        type: 'bar',
        data: {

            labels: myLabel,
            datasets: [
                {
                    label: "amount",
                    data: myData,
                    backgroundColor: test(),
                    
                }
            ]
        },
        options: {
            legend: { display: false },
            title: {
                display: true,
                text: 'Amount of logs on threads'
            }, scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: "Logs"
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: "THREADS"
                    }
                }]
            }
        }
    });


        var levelCanvas = document.getElementById("doughnut-chart");

        var levelData = {
            labels: [
                "Debug",
                "Error",
                "Fatal",
                "Info",
                "Off",
                "Warn"
            ],
            datasets: [
                {
                    data: ['@ViewData["Debug"]', '@ViewData["Error"]', '@ViewData["Fatal"]',
                        '@ViewData["Info"]', '@ViewData["Off"]','@ViewData["Warn"]'],
                    backgroundColor: [
                        "#F3525C",
                        "#00674C",
                        "#95B23A",
                        "#FCCE44",
                        "#F57F4F"
                    ]
                }]
        };

        var pieChart = new Chart(levelCanvas, {
            type: 'doughnut',
            data: levelData
        });


    new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
            labels: ['@Model.Create().ElementAt(0).Date', '@Model.Create().ElementAt(1).Date', '@Model.Create().ElementAt(2).Date', '@Model.Create().ElementAt(3).Date',
                    '@Model.Create().ElementAt(4).Date','@Model.Create().ElementAt(5).Date','@Model.Create().ElementAt(6).Date','@Model.Create().ElementAt(7).Date',],
            datasets: [{
                data: ['@Model.Create().ElementAt(0).AmountOfExceptions','@Model.Create().ElementAt(1).AmountOfExceptions','@Model.Create().ElementAt(2).AmountOfExceptions',
                        '@Model.Create().ElementAt(3).AmountOfExceptions','@Model.Create().ElementAt(4).AmountOfExceptions','@Model.Create().ElementAt(5).AmountOfExceptions',
                   '@Model.Create().ElementAt(6).AmountOfExceptions','@Model.Create().ElementAt(7).AmountOfExceptions',],
                label: "Exceptions",
                borderColor: "#3e95cd",
                fill: false
            }
            ]
        },
        options: {
            title: {
                display: true,
                text: 'Amount of Exceptions'
            }
        }
    });
    </script>
